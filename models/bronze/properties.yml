version: 2

models:
  - name: bronze_returns
    config:
      materialized: view

  - name: bronze_store
    config:
      materialized: view
    columns: 
      - name: store_sk
        tests:
          - unique
          - not_null
      - name: city
        tests:
          - accepted_values:
              values: ['New York', 'Brooklyn', 'Austin', 'San Jose', 'Toronto']
              config:
                severity: warn  
      - name: country
        tests:
          - accepted_values:
              values: ['USA', 'Canada']
              config:
                severity: error 


  - name: bronze_sale
    config:
      materialized: view
    columns: 
      - name: sales_id
        tests:
          - unique
          - not_null
        
      - name: store_sk
        tests:
          - relationships:
              to: ref('bronze_store')
              field: store_sk
